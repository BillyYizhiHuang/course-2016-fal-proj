# BU CS591L1 Fall 2016 Project 1

**Team Members:**
+ Yehui Huang
+ Yingqiao Xiong

##Narrative 2a
In this project, we've considered the relationship between the avg income and the number of some kind of public buildings (Hospital, School, HealthStore and Public Garden). The analyze is based on the zipcode. We want to see if the total number of the public buildings is proportional to the average earnings.
 
##Datasets
The five datasets we used:
<ol>
<li>'hospital_locations':'https://data.cityofboston.gov/resource/u6fv-m8v4.json'</li>
<li>'employee_earnings_report_2015':'https://data.cityofboston.gov/resource/bejm-5s9g.json'</li>
<li>'health_corner_stores':'https://data.cityofboston.gov/resource/ybm6-m5qd.json'</li>
<li>'community_gardens':'https://data.cityofboston.gov/resource/rdqf-ter7.json'</li>
<li>'public_schools':'https://data.cityofboston.gov/resource/492y-i77g.json'</li>
<li>'crime_incident_reports':https://data.cityofboston.gov/Public-Safety/Crime-Incident-Reports-July-2012-August-2015-Sourc/7cdf-6fgx/data</li>
<li>'approved_building_permit':https://data.cityofboston.gov/Permitting/Approved-Building-Permits/msk6-43c6/data</li>
</ol>

##Porcess
Firstly we can obtain the number of average earnings in each zipcode area by using MapReduce to project and reduce to get the total earnings and counts in each zipcode, then we can obtain the average earning by (total earning divides counts) for each zipcode area.

Secondly we can obtain number of hospital, number of garden, number of store and number of school group by the zipcode by applying the simple MapReduce Function.

Combining all datasets generated by the second step, we obtained a num of these building grouped by the zipcodes. 

Lastly, we merge the previous dataset with the average earnings dataset to obtain a dataset that contains the number of these buildings and average earning using zipcode as unit.

##Instruction
**To run the project, please follow the follow instructions:**
###Authentication
The `auth.json` file contains the credentials with the following format
```
{
  "db_username": "alice_bob",
  "db_password": "alice_bob"
}
```
If you want to connect to the db needs the authentication, there is a `helpers.py` script that is imported in every activity scripts.
In every script, we use the functions in `helpers.py` to connect to the authenticated database. The following code in every activity script is to connect to the database by reading the `user_name` and `pass_word` in your own `auth.json`:
```
repo = openDb(getAuth("db_username"), getAuth("db_password"))
```
Just need to store your own `db_username` and `db_password` in the `auth.json`

###Run the program:
Please execute the `execute.py` to run the whole program:
```
python3 execute.py
```

#Project 2 Updates:
**Team Members:**
+ Yehui Huang
+ Yingqiao Xiong
+ Hongyu Zhou
+ Chang Gao

###K-Means Algorthm in Crime and Zip
Firstly we extract two new data sets [CrimeIncidentReport](https://data.cityofboston.gov/Public-Safety/Crime-Incident-Reports-July-2012-August-2015-Sourc/7cdf-6fgx/data) and [ApprovedBuildingPermit](https://data.cityofboston.gov/Permitting/Approved-Building-Permits/msk6-43c6/data). We use the k-means s an optimization to calculate the approximated mean point in each zip code area and use the argmin to place the crime coordinates into his closest zipcode mean point. 

###Map Reduce to merge Crime into the Result Dataset
We used mapreduce again to merge the crime_zip dataset into the result dataset from project 1

###Statistic Operations
Frist we use the algorithm on the leacture note to get the corrolation efficiency between average income and other public buildings(also crime) to measure the linear dependency of average income and other public.
Then we bulid a least square function to optimize a line that has the smallest possible value for the sum of the squares of the data we use.
Finally, we calculate the R-square score of these data combination and it least square line to evaluate how well the line fit the data.
The statisticOperations.py file will extract the data, do the operations above, and finally output the statistic data that we need.
